<ion-header>
  <ion-toolbar  style="--background: #064380; color: white;">
    <ion-title>Perfil</ion-title>
      <ion-avatar slot="end" style="padding: 10px;">
        <img  [src]="avatarUrl" >
      </ion-avatar>
  </ion-toolbar>
</ion-header>

<ion-content paddding="true">
  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col size="8">
        <ion-card style="text-align: center;">
          <ion-avatar   style="margin: auto;">
            <img  [src]="avatarUrl" >
          </ion-avatar>
          <ion-item>

            <ion-label  style="text-align: center;">{{user.name}}</ion-label>
          </ion-item>
          <ion-item>
            <ion-icon name="finger-print"></ion-icon>

            <ion-label  style="text-align: center;">{{user.userName}}</ion-label>
          </ion-item>
      
          <ion-item class="ion-activated ion-justify-content-center">
            <ion-icon name="mail"></ion-icon>
            <ion-label class="ion-text-center">{{user.email}}</ion-label>
          </ion-item>
        
          <ion-card-content>
            <ion-grid>
           
              <ion-row class="ion-justify-content-center">
      
                <ion-button color='mango'  (click)="logoutAction()">Cerrar sesi√≥n</ion-button>
              </ion-row>
            </ion-grid>
      
          </ion-card-content>
          <ion-item>
      
          </ion-item>
        </ion-card>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="isAdmin()" class="ion-justify-content-center">
      <!-- *ngIf="isAdmin()" -->
      <ion-col>
          <ion-row *ngFor="let user of filteredUsers"> 
              <ion-col>
                  <ion-label>

                    <h2>{{user.name}}</h2>

                  </ion-label>
              </ion-col>
              <ion-col>
                  <ion-label>
                    <h3>{{user.userName}}</h3>
                    <!-- <p>Listen, I've had a pretty messed up day...</p> -->
                  </ion-label>
              </ion-col>
              <ion-col>
                <ion-label >
                      <h2 *ngFor="let userRole of user.roles"> {{userRole.description}}
                        <ion-button color="danger" fill="clear" (click)="dettach(userRole,user)">
                          <ion-icon name="close"></ion-icon>
                        </ion-button>
                      </h2>
                </ion-label>
              </ion-col>
              <ion-col>
                <ion-item>
                  <ion-select required="true" [(ngModel)]="user.selectedRole"  (ionChange)="assignRole(user)"    placeholder="seleccione un rol">
                    <ion-select-option [value]="role.name" *ngFor="let role of roles" >{{role.description}}</ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col>
          </ion-row>
      </ion-col>

        
    </ion-row>
    <ion-row padding="true">
      <ion-col>
        <ion-item>
          <ion-label>Nombre</ion-label>
          <ion-input [(ngModel)]="newName"></ion-input>
      
          <ion-label>Descripcion</ion-label>

          <ion-input [(ngModel)]="newDescription"></ion-input>
          <ion-button (click)="addRole()" slot="end" color="mango">
            <ion-icon name="add"></ion-icon>
    
          </ion-button>
        </ion-item>
   
      </ion-col>
      
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-list>
        
          <ion-list-header>
            <ion-label>

              Roles
            </ion-label>
              
          </ion-list-header>
          <ion-item *ngFor="let role of roles">
              <ion-label>
                <h2>{{role.name}}</h2>
                <h3>{{role.description}}</h3>
              </ion-label>
              <ion-button (click)="deleteRole(role.id)" slot="end" color="danger">
                <ion-icon name="trash"></ion-icon>
        
              </ion-button>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>

  


</ion-content>